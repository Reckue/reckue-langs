(()=>{var e={471:(e,t,s)=>{var i=s(40);e.exports=(i.default||i).apply(i,[])},393:(e,t,s)=>{var i=s(385);e.exports=(i.default||i).apply(i,[])},827:(e,t,s)=>{var i=s(70);e.exports=(i.default||i).apply(i,[])},40:(e,t,s)=>{s(55),e.exports=function(e){return""+'<div class="menu-container"></div>'}},739:(e,t,s)=>{var i=s(55);e.exports=function(e){var t,s="",n=e||{};return function(e,n){s=s+'<div class="change-level-menu"'+i.attr("style",i.style(`width: ${n}`),!0,!0)+'><a class="wb-level-controller">+</a><a class="wb-level-number">'+i.escape(null==(t=e)?"":t)+'</a><a class="wb-level-controller">-</a></div>'}.call(this,"number"in n?n.number:"undefined"!=typeof number?number:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),s}},385:(e,t,s)=>{s(55),e.exports=function(e){return""+'<div class="page-popup-menu"></div>'}},332:(e,t,s)=>{var i=s(55);e.exports=function(e){var t,s="",n=e||{};return function(e,n,r){s=s+'<div class="display-word-menu"><a class="translate-link" target="_blank"'+i.attr("href",e,!0,!0)+">"+i.escape(null==(t=r)?"":t)+"</a><div><span>cursor-x:</span><span>"+i.escape(null==(t=n.cursor.x)?"":t)+"</span></div><div><span>cursor-y:</span><span>"+i.escape(null==(t=n.cursor.y)?"":t)+"</span></div><div><span>block-width:</span><span>"+i.escape(null==(t=n.block.width)?"":t)+"</span></div><div><span>block-height:</span><span>"+i.escape(null==(t=n.block.height)?"":t)+"</span></div><div><span>text-length:</span><span>"+i.escape(null==(t=n.textLength)?"":t)+"</span></div><div><span>text-blocks-count:</span><span>"+i.escape(null==(t=n.textBlocksCount)?"":t)+"</span></div><div><span>text-block-index:</span><span>"+i.escape(null==(t=n.currentLine)?"":t)+"</span></div><div><span>text-block-size-width:</span><span>"+i.escape(null==(t=n.currentTextBlockSize.width)?"":t)+"</span></div><div><span>text-block-size-height:</span><span>"+i.escape(null==(t=n.currentTextBlockSize.height)?"":t)+"</span></div>\x3c!--div--\x3e\x3c!--    span gap-height:--\x3e\x3c!--    span= netGraph.gapHeight--\x3e\x3c!----\x3e\x3c!--div--\x3e\x3c!--    span count-gaps:--\x3e\x3c!--    span= netGraph.countGaps--\x3e<div><span>real-height:</span><span>"+i.escape(null==(t=n.realHeight)?"":t)+"</span></div><div><span>coefficient:</span><span>"+i.escape(null==(t=n.coefficient)?"":t)+"</span></div>\x3c!--div--\x3e\x3c!--    span text-block-width:--\x3e\x3c!--    span= textBlock.width--\x3e\x3c!--div--\x3e\x3c!--    span text-block-height:--\x3e\x3c!--    span= textBlock.height--\x3e\x3c!--div--\x3e\x3c!--    span index:--\x3e\x3c!--    span= index--\x3e\x3c!--div--\x3e\x3c!--    span line:--\x3e\x3c!--    span= line--\x3e\x3c!--div--\x3e\x3c!--    span text-length:--\x3e\x3c!--    span= length--\x3e\x3c!--div--\x3e\x3c!--    span one-symbol-width:--\x3e\x3c!--    span= one--\x3e\x3c!--div--\x3e\x3c!--    span cursor-offset-width:--\x3e\x3c!--    span= offset.width--\x3e\x3c!--div--\x3e\x3c!--    span cursor-offset-height:--\x3e\x3c!--    span= offset.height--\x3e\x3c!--div--\x3e\x3c!--    span block-width:--\x3e\x3c!--    span= block.width--\x3e\x3c!--div--\x3e\x3c!--    span block-height:--\x3e\x3c!--    span= block.height--\x3e\x3c!--div--\x3e\x3c!--    span cursor-x:--\x3e\x3c!--    span= eventInfo.x--\x3e\x3c!--div--\x3e\x3c!--    span cursor-y:--\x3e\x3c!--    span= eventInfo.y--\x3e\x3c!--.edit-button EDIT--\x3e</div>"}.call(this,"href"in n?n.href:"undefined"!=typeof href?href:void 0,"netGraph"in n?n.netGraph:"undefined"!=typeof netGraph?netGraph:void 0,"word"in n?n.word:"undefined"!=typeof word?word:void 0),s}},70:(e,t,s)=>{s(55),e.exports=function(e){return""+"<style>.menu-container {\n    text-align: center;\n}\n\n.page-popup-menu {\n    position: fixed;\n    user-select: none;\n    color: #1e81c6;\n    z-index: 1000;\n    transition: all 0.2s ease;\n    background: white;\n    border: 1px #1e81c6 solid;\n    padding: 2px;\n    border-radius: 4px;\n}\n\na {\n    text-decoration: none;\n}\n\na:hover {\n    text-decoration: none;\n}\n\n.wb-level-controller {\n    cursor: pointer;\n}\n\n.wb-level-number {\n    color: #444\n}\n\n.change-level-menu {\n    height: 30px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    font-family: Impact, serif;\n    position: relative;\n    font-size: 18px;\n    z-index: 1001;\n    border-radius: 8px;\n    background: #f9f9ff;\n    border: 1px #1e81c6 solid;\n}\n\n.display-word-menu {\n    display: flex;\n    flex-direction: column;\n    grid-gap:4px;\n    margin: 4px 8px;\n    padding-bottom: 2px;\n    font-size: 12px;\n}\n\n.display-word-menu a {\n    line-height: normal;\n    text-decoration: none;\n    color: #1e81c6;\n    border-bottom: 1px #1e81c6 solid;\n}\n\n.display-word-menu div {\n    display: flex;\n    flex-direction: row;\n    grid-gap: 4px;\n}\n\n.display-word-menu .edit-button {\n    margin-left: 4px;\n    font-family: Impact, serif;\n}</style>"}},55:(e,t,s)=>{"use strict";var i=Object.prototype.hasOwnProperty;function n(e,t){return Array.isArray(e)?function(e,t){for(var s,i="",r="",o=Array.isArray(t),a=0;a<e.length;a++)(s=n(e[a]))&&(o&&t[a]&&(s=h(s)),i=i+r+s,r=" ");return i}(e,t):e&&"object"==typeof e?function(e){var t="",s="";for(var n in e)n&&e[n]&&i.call(e,n)&&(t=t+s+n,s=" ");return t}(e):e||""}function r(e){if(!e)return"";if("object"==typeof e){var t="";for(var s in e)i.call(e,s)&&(t=t+s+":"+e[s]+";");return t}return e+""}function o(e,t,s,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),s||-1===t.indexOf('"'))?(s&&(t=h(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,s){if(1===arguments.length){for(var i=t[0],n=1;n<t.length;n++)i=e(i,t[n]);return i}for(var o in s)if("class"===o){var a=t[o]||[];t[o]=(Array.isArray(a)?a:[a]).concat(s[o]||[])}else if("style"===o){a=(a=r(t[o]))&&";"!==a[a.length-1]?a+";":a;var h=r(s[o]);h=h&&";"!==h[h.length-1]?h+";":h,t[o]=a+h}else t[o]=s[o];return t},t.classes=n,t.style=r,t.attr=o,t.attrs=function(e,t){var s="";for(var a in e)if(i.call(e,a)){var h=e[a];if("class"===a){s=o(a,h=n(h),!1,t)+s;continue}"style"===a&&(h=r(h)),s+=o(a,h,!1,t)}return s};var a=/["&<>]/;function h(e){var t=""+e,s=a.exec(t);if(!s)return e;var i,n,r,o="";for(i=s.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}n!==i&&(o+=t.substring(n,i)),n=i+1,o+=r}return n!==i?o+t.substring(n,i):o}t.escape=h,t.rethrow=function e(t,i,n,r){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&i||r))throw t.message+=" on line "+n,t;try{r=r||s(835).readFileSync(i,"utf8")}catch(s){e(t,null,n)}var o=3,a=r.split("\n"),h=Math.max(n-o,0),c=Math.min(a.length,n+o);throw o=a.slice(h,c).map((function(e,t){var s=t+h+1;return(s==n?"  > ":"    ")+s+"| "+e})).join("\n"),t.path=i,t.message=(i||"Pug")+":"+n+"\n"+o+"\n\n"+t.message,t}},835:()=>{}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}(()=>{"use strict";class e{log=e=>{window.console.log("Reckue language app: "+e)};#e=e=>{window.console.log(e.textContent),window.console.log(e.toString()),window.console.log(e.parentNode.toString()),window.console.log(e.parentNode.nodeName),window.console.log(e.parentNode.role)}}const t=new Map;class i{static add=(e,s)=>{t.set(e,s)};static get=e=>t.get(e);static getWordbookService=()=>{const e=i.get("wordbook");if(e)return e}}class n{appParams=()=>new Promise((e=>{chrome.storage.local.get(["enable","russian","english","china","korean"],(t=>{i.add("settings",t),e(t.enable)}))}));saveWordbooks=e=>{chrome.storage.local.set(e)};getByName=e=>new Promise((t=>chrome.storage.local.get([e],(s=>t(s[e])))))}class r{#t;#s;#i;constructor(e,t){this.#t=e,this.#i=t}getCount=()=>this.#s;calcPagesCount=()=>(this.#s=Math.ceil(this.#t/this.#i),this.#s);isIndexOnPage=(e,t)=>t>=this.#n(e)&&t<this.#r(e);#n=e=>e*this.#i;#r=e=>(e+1)*this.#i}class o{#o;#a;constructor(){this.#a=new Map,this.#o=new r(0,0)}remove=e=>{this.#a.delete(e),this.#o=new r(this.#a.size,50),this.#o.calcPagesCount()};set=e=>(e.forEach((e=>{this.#a.set(e.word,e.level)})),this.#o=new r(this.#a.size,50),this.#o.calcPagesCount(),this);get=()=>this.#a;getPages=()=>this.#o;getPage=e=>{let t=0;const s=new Map;return this.#a.forEach(((i,n)=>{this.#o.isIndexOnPage(e,t)&&s.set(n,i),t++})),s};toObject=()=>{const e={};return this.#h().forEach(((t,s)=>{e[this.getName(s)]=t})),e};getName=e=>"wordbook"+e;#c=()=>{const e=[];return this.#a.forEach(((t,s)=>{e.push({word:s,level:t})})),e};#h=()=>{const e=[[]];return this.#c().forEach((t=>this.#l(e,t))),e};#l=(e,t)=>{const s=e.length-1;e[s].length<100?e[s].push(t):(e.push([]),this.#l(e,t))}}class a{#d;#u;#p;#g;executeAfter=e=>{this.#g=e};constructor(){this.#d=new n,this.#u=new e,this.#p=new o}set=e=>{this.#p.set(e),this.#f()};remove=e=>{this.#p.remove(e),this.#f()};#f=()=>{const e=this.#p.toObject();this.#d.saveWordbooks(e)};getWordbook=()=>this.#p;getFilteredWordbook=e=>{const t=[];this.#p.get().forEach(((s,i)=>i&&i.includes(e)&&t.push({word:i,level:s})));const s=new o;return s.set(t),s};getWordbookCache=()=>this.#p.get();loadWordbooks=()=>{this.#w(0)};#w=e=>{const t=this.#p.getName(e);this.#u.log(`Loaded ${t} from storage`),this.#d.getByName(t).then((t=>this.#x(t,e)))};#x=(e,t)=>{e?(this.#p.set(e),this.#v(t)):this.#g()};#v=e=>{const t=e+1;this.#w(t)}}class h{constructor(){this.toElement=e=>{const t=window.document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}}}class c{#m;constructor(){this.#m=new h}append=()=>{const e=s(827),t=this.#m.toElement(e);window.document.querySelector("head").appendChild(t)}}class l{constructor(){this.getHTMLMapper=()=>this.HTMLMapper,this.HTMLMapper=new h}}var d,u=function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,s):n?n.value=s:t.set(e,s),s},p=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)};class g extends l{constructor(e){super(),d.set(this,void 0),this.setRef=e=>{u(this,d,e,"f")},this.getRef=()=>p(this,d,"f");const t=s(471);u(this,d,this.getHTMLMapper().toElement(t),"f"),e.appendChild(p(this,d,"f"))}}d=new WeakMap;const f=Object.freeze({NATIVE:{name:"native",hex:"#2e8801",number:4},ADVANCED:{name:"advanced",hex:"#72d400",number:3},INTERMEDIATE:{name:"intermediate",hex:"#ef9f00",number:2},ELEMENTARY:{name:"elementary",hex:"#ab0000",number:1},BEGINNER:{name:"beginner",hex:"#ff2a00",number:0}});class w{onHover(e,t){const s=i.get("menu");e.addEventListener("click",(e=>this.#b(e,s,t))),e.addEventListener("mouseout",s.displayOff)}#b=(e,t,s)=>{t.displayOn(),t.setPosition(e.clientX,e.clientY),t.setContent(s)};onHoverAll=e=>{i.get("refs").get(e).forEach((t=>{this.onHover(t,e)}))};renderAll=(e,t)=>{i.get("refs").get(e).forEach((e=>{this.resolveColor(e,t)}))};createRef=e=>{const t=document.createElement("a");return e=e.replace(/\r?\n/g,""),t.innerText=e,t.style.cursor="pointer",t};resolveColor=(e,t)=>{switch(t){case f.NATIVE.name:e.style.color=f.NATIVE.hex;break;case f.ADVANCED.name:e.style.color=f.ADVANCED.hex;break;case f.INTERMEDIATE.name:e.style.color=f.INTERMEDIATE.hex;break;case f.ELEMENTARY.name:e.style.color=f.ELEMENTARY.hex;break;case f.BEGINNER.name:e.style.color=f.BEGINNER.hex}}}class x extends g{#y;#k;#E;constructor(e,t){super(e),this.#y=i.getWordbookService(),this.#E=t,this.#k=new w}updateLevel=()=>{const e=this.#y.getWordbookCache().get(this.#E);this.#T(f[e.toUpperCase()].number)};setWord=e=>{this.#E=e};#S=e=>{const t=e+1;this.#C(t)};#P=e=>{if(e>0){const t=e-1;this.#C(t)}};#C=e=>{this.#M(e,((e,t)=>{this.#T(e),this.#k.renderAll(this.#E,t.name),this.#y.set([{word:this.#E,level:t.name}])}))};#M=(e,t)=>{var s,i;s=f,i=s=>s.number===e&&t(e,s),Object.entries(s).forEach((e=>{const t=e[1];i(t)}))};#T=e=>{const t=s(739),i=this.getHTMLMapper().toElement(t(this.#R(e)));this.#L(i),this.#W(e)};#L=e=>{this.getRef().replaceWith(e),this.setRef(e)};#W=e=>{const t=this.getRef().getElementsByClassName("wb-level-controller");t[0].addEventListener("click",(()=>this.#S(e))),t[1].addEventListener("click",(()=>this.#P(e)))};#R=e=>({number:e,width:i.get("POPUP_WIDTH")+"px"})}class v extends g{#B;#A;constructor(e){super(e),this.#B=s(332),this.#A=e,this.#A.prepend(this.getRef())}updateLink=(e,t)=>{const s=this.#B({word:e,netGraph:t}),i=this.getHTMLMapper().toElement(s),n=this.getRef();this.setRef(i),this.#A.replaceChild(this.getRef(),n)};#I=e=>{const t=i.get("language"),s=`${i.get("TRANSLATE_URL")}&sl=${t.sl}&tl=${t.tl}&text=${e}`;return this.#H(s),s};#H=e=>{window.console.log(chrome.tabs),window.open(e,"_blank").close()}}var m,b,y,k,E,T,S,C,P,M,R,L,W,B=function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,s):n?n.value=s:t.set(e,s),s},A=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)};class I{constructor(){m.add(this),b.set(this,void 0),y.set(this,void 0),k.set(this,void 0),E.set(this,void 0),T.set(this,"0"),S.set(this,"0"),this.getRef=()=>A(this,b,"f"),this.setContent=(e,t)=>{A(this,E,"f").setWord(e),A(this,k,"f").updateLink(e,t),A(this,L,"f").call(this)},this.setPosition=(e,t)=>{const s=i.get("POPUP_WIDTH")/2;B(this,T,e-s+"px","f"),B(this,S,`${t}px`,"f"),A(this,M,"f").call(this)},this.displayOn=()=>{A(this,b,"f").style.visibility="visible"},this.displayOff=()=>{A(this,b,"f").style.visibility="hidden"},C.set(this,(()=>{window.document.querySelector("body").appendChild(A(this,b,"f"))})),P.set(this,(()=>{const e=s(393);B(this,b,A(this,y,"f").toElement(e),"f"),this.displayOff(),A(this,m,"m",R).call(this),B(this,k,new v(A(this,b,"f")),"f"),B(this,E,new x(A(this,b,"f")),"f"),A(this,C,"f").call(this)})),M.set(this,(()=>{A(this,b,"f").style.left=A(this,T,"f"),A(this,b,"f").style.top=A(this,S,"f")})),L.set(this,(()=>{const e=A(this,W,"f").call(this,A(this,k,"f").getRef().offsetWidth),t=A(this,W,"f").call(this,i.get("POPUP_WIDTH"))-e;A(this,k,"f").getRef().style.left=`${t}px`})),W.set(this,(e=>e/2)),B(this,y,new h,"f"),i.add("POPUP_WIDTH",120),i.add("TRANSLATE_URL","https://translate.google.com/#view=home&op=translate"),A(this,P,"f").call(this)}}b=new WeakMap,y=new WeakMap,k=new WeakMap,E=new WeakMap,T=new WeakMap,S=new WeakMap,C=new WeakMap,P=new WeakMap,M=new WeakMap,L=new WeakMap,W=new WeakMap,m=new WeakSet,R=function(){A(this,b,"f").addEventListener("mouseover",(()=>this.displayOn())),A(this,b,"f").addEventListener("mouseout",(()=>this.displayOff()))};class H{#y;#E;#N;constructor(e){this.#E=e,this.#N=new w,this.#y=i.getWordbookService()}create=()=>{if(""===this.#E.get())return this.#z();const e=this.#N.createRef(this.#E.get().trim()),t=this.#y.getWordbookCache().get(this.#E.getClear());return this.#O(t)?this.#Q(e,t):this.#G(e)};#z=()=>document.createTextNode(this.#E.get());#Q=(e,t)=>(this.#N.onHover(e,this.#E.getClear()),this.#N.resolveColor(e,t),e);#G=e=>(this.#q(),e.addEventListener("click",this.#$,{once:!0}),e);#$=()=>{const e=f.BEGINNER.name,t=this.#E.getClear();this.#y.set([{word:t,level:e}]),this.#N.renderAll(t,e),this.#N.onHoverAll(this.#E.getClear())};#q=()=>" "!==this.#E.getClear()&&i.get("notSavedWords").add(this.#E.getClear());#O=e=>void 0!==e}class N{#u=new e;constructor(){i.add("menu",new I),i.add("notSavedWords",new Set),i.add("refs",new Map)}rebuildPage=()=>{this.#j((e=>this.#D(e.ref,e.words)))};#j=e=>{this.#u.log("Rebuilding page..."),i.get("render-queue").takeTurns(e),this.#u.log("Rebuilding page complete!"),this.#u.log(`Found not saved words - ${i.get("notSavedWords").size}`)};#D=(e,t)=>{"A"!==e.parentNode.nodeName&&(t.forEach((t=>{const s=this.#U(t);""!==s.textContent&&(this.#_(t.getClear(),s),this.#F(s,e))})),e.textContent="")};#_=(e,t)=>{const s=i.get("refs");let n=s.get(e);!n&&(n=[]),n.push(t),s.set(e,n)};#U=e=>""!==e.get()?new H(e).create():this.#V(" ");#F=(e,t)=>{t.after(e,t)};#V=e=>document.createTextNode(e)}class z{#Y;constructor(){this.#Y=new MutationObserver((e=>this.#X(e)))}listen=e=>{this.#Y.observe(e,{childList:!0})};#X=e=>{i.get("render-queue").isActive()||e.forEach((e=>this.#J(e)))};#J=e=>{e.addedNodes.forEach((e=>{i.get("page-elements-queue").queueUp(e)}))}}class O{#u;#K;#Z;#ee;constructor(){this.#u=new e,this.#K=new z,this.#Z=i.get("page-elements-queue"),this.#ee=i.get("text-elements-queue")}putInQueue=e=>{this.#Z.queueUp(e)};parse=()=>{this.#u.log("Started queued parser."),this.#Z.takeTurns(this.#te)};#se=(e,t)=>{if("BODY"===e.nodeName){const s=(100*t/e.childNodes.length).toFixed(2);this.#u.log(`processed ${s}% of the page!`)}};#te=e=>{e.childNodes.forEach(((t,s)=>{this.#se(e,s),this.#ie(t)&&this.#ne(t)}))};#ie=e=>!(this.#re(e)||this.#oe(e)||this.#ae(e)||this.#he(e)||this.#ce(e)||this.#le(e)||this.#de(e)||this.#ue(e)||this.#pe(e)||this.#ge(e));#re=e=>e instanceof HTMLScriptElement;#ue=e=>e instanceof HTMLFormElement;#ae=e=>e instanceof HTMLImageElement;#he=e=>e instanceof HTMLInputElement;#ce=e=>e instanceof HTMLLinkElement;#de=e=>e instanceof HTMLStyleElement;#le=e=>e instanceof HTMLBRElement;#oe=e=>e instanceof SVGSVGElement;#pe=e=>e instanceof Comment;#ge=e=>"CODE"===e.nodeName||"A"===e.nodeName;#ne=e=>{e.hasChildNodes()?(this.#K.listen(e),this.#te(e)):this.#ee.queueUp(e)}}class Q{getRegex=()=>new RegExp(this.#fe(this.#we()));#fe=e=>`[^${e}]+`;#we=()=>""===this.#xe()?"\\w":this.#xe();#xe=()=>this.#ve()+this.#ve().toUpperCase()+this.#me()+this.#me().toUpperCase()+this.#be()+this.#ye();#ve=()=>i.get("settings").russian?"йцукенгшщзхъфывапролджэячсмитьбю":"";#me=()=>i.get("settings").english?"yqwertuiopasdfghjklzxcvbnm":"";#be=()=>i.get("settings").korean?"ㄱㄴㄷㄹㅁㅂㅅㅇㅈㅊㅋㅌㅍㅎㅏㅓㅗㅜㅡㅣㅑㅕㅛㅠㄲㄸㅃㅆㅉㄳㄵㄶㄺㄻㄼㄽㄾㄿㅀㅄㅐㅒㅔㅖㅘㅙㅚㅝㅞㅟㅢ":"";#ye=()=>i.get("settings").china?"一丁丂七丄丅丆万丈三上下丌不与丏丐丑丒专且丕世丗丘丙业丛东丝丞丟丠両丢丣两严並丧丨丩个丫丬中丮丯丰丱串丳临丵丶丷丸丹为主丼丽举丿乀乁乂乃乄久乆乇么义乊之乌乍乎乏乐乑乒乓乔乕乪乫乬乭乮乯买乱乲乳乴乵乶乷乸乹乺乻乼乽乾乿亀亁亂亃亄亅了亇予争亊事二亍于亏亐云互亓五井亖亗亘亙亚些亜亝亞亟亠亡亢亣交亥亦产亨亩亪享京亭亮亯亰亱亲亳亴亵亶亷亸亹人亻亼亽亾亿什仁仂仃仄仅仆仇仈仉今介仌仍从仏仐仑仒仓仔仕他仗付仙仚仛仜仝仞仟仠仡仢代令以仦仧仨仩仪仫们仭仮仯仰仱仲仳仴仵件价仸仹仺任仼份仾仿伀企伂伃伄伅伆伇伈伉伊伋伌伍伎伏伐休伒伓伔伕伖众优伙会伛伜伝伞伟传伡伢伣伤伥伦伧伨伩伪伫伬伭伮伯估伱伲伳伴伵伶伷伸伹伺伻似伽伾伿佀佁佂佃佄佅但佇佈佉佊佋佌位低住佐佑佒体佔何佖佗佘余佚佛作佝佞佟你佡佢佣佤佥佦佧佨佩佪佫佬佭佮佯佰佱佲佳佴併佶佷佸佹佺佻佼佽佾使侀侁侂侃侄侅來侇侈侉侊例侌侍侎侏侐侑侒侓侔侕侖侗侘侙侚供侜依侞侟侠価侢侣侤侥侦侧侨侩侪侫侬侭侮侯侰侱侲侳侴侵侶侷侸侹侺侻侼侽侾便俀俁係促俄俅俆俇俈俉俊俋俌俍俎俏俐俑俒俓俔俕俖俗俘俙俚俛俜保俞俟俠信俢俣俤俥俦俧俨俩俪俫俬俭修俯俰俱俲俳俴俵俶俷俸俹俺俻俼俽俾俿倀倁倂倃倄倅倆倇倈倉倊個倌倍倎倏倐們倒倓倔倕倖倗倘候倚倛倜倝倞借倠倡倢倣値倥倦倧倨倩倪倫倬倭倮倯倰倱倲倳倴倵倶倷倸倹债倻值倽倾倿偀偁偂偃偄偅偆假偈偉偊偋偌偍偎偏偐偑偒偓偔偕偖偗偘偙做偛停偝偞偟偠偡偢偣偤健偦偧偨偩偪偫偬偭偮偯偰偱偲偳側偵偶偷偸偹偺偻偼偽偾偿傀傁傂傃傄傅傆傇傈傉傊傋傌傍傎傏傐傑傒傓傔傕傖傗傘備傚傛傜傝傞傟傠傡傢傣傤傥傦傧储傩傪傫催傭傮傯傰傱傲傳傴債傶傷傸傹傺傻傼傽傾傿僀僁僂僃僄僅僆僇僈僉僊僋僌働僎像僐僑僒僓僔僕僖僗僘僙僚僛僜僝僞僟僠僡僢僣僤僥僦僧僨僩僪僫僬僭僮僯僰僱僲僳僴僵僶僷僸價僺僻僼僽僾僿儀儁儂儃億儅儆儇儈儉儊儋儌儍儎儏儐儑儒儓儔儕儖儗儘儙儚儛儜儝儞償儠儡儢儣儤儥儦儧儨儩優儫儬儭儮儯儰儱儲儳儴儵儶儷儸儹儺儻儼儽儾儿兀允兂元兄充兆兇先光兊克兌免兎兏児兑兒兓兔兕兖兗兘兙党兛兜兝兞兟兠兡兢兣兤入兦內全兩兪八公六兮兯兰共兲关兴兵其具典兹兺养兼兽兾兿冀冁冂冃冄内円冇冈冉冊冋册再冎冏冐冑冒冓冔冕冖冗冘写冚军农冝冞冟冠冡冢冣冤冥冦冧冨冩冪冫冬冭冮冯冰冱冲决冴况冶冷冸冹冺冻冼冽冾冿净凁凂凃凄凅准凇凈凉凊凋凌凍凎减凐凑凒凓凔凕凖凗凘凙凚凛凜凝凞凟几凡凢凣凤凥処凧凨凩凪凫凬凭凮凯凰凱凲凳凴凵凶凷凸凹出击凼函凾凿刀刁刂刃刄刅分切刈刉刊刋刌刍刎刏乖乗乘乙乚乛乜九乞也习乡乢乣乤乥书乧乨乩":""}class G{#fe;#ke;#Ee;constructor(e){this.#fe=new Q,this.#ke=e,this.#Te()}get=()=>this.#ke;getClear=()=>this.#Ee;#Te=()=>{this.#Ee=this.#ke.toString().toLowerCase().replace(this.#fe.getRegex(),""),this.#Se(this.#Ee)||this.#Ce()};#Ce=()=>{let e=null;this.#Ee.endsWith("s")&&(e="s"),this.#Ee.endsWith("ed")&&(e="ed"),this.#Ee.endsWith("ing")&&(e="ing"),null!==e&&this.#Pe(e)};#Me=()=>{this.#Ee.startsWith("un")&&this.#Re("un")};#Pe=e=>{this.#Ee=this.#Ee.substr(0,this.#Ee.length-e.length),this.#Le(this.#Ee)};#Re=e=>{this.#Ee=this.#Ee.substr(e.length-1)};#Le=e=>{this.#Se(e)||(this.#Se(e+"s")&&(this.#Ee=e+"s"),this.#Se(e+"e")&&(this.#Ee=e+"e"))};#Se=e=>i.getWordbookService().getWordbookCache().get(e)}class q{#ee;#We;#p;constructor(){this.#p=i.getWordbookService().getWordbookCache(),this.#ee=i.get("text-elements-queue"),this.#We=i.get("render-queue")}parse=()=>{this.#ee.takeTurns((e=>{const t=this.#Be(e);this.#Ae(e,t)}))};#Be=e=>{const t=e.textContent.split(" ");return this.#Ie(t)};#Ie=e=>{const t=[];return e.forEach(((e,s)=>{0!==s&&t.push(""),this.#He(t,e,"-")||this.#He(t,e,".")||this.#He(t,e,"...")||this.#He(t,e,",")||this.#Ne(t,e)})),t};#Ne=(e,t)=>{t.endsWith("n't")&&!t.includes("can't")?this.#ze(e,t,"n't","not"):t.endsWith("'ll")?this.#ze(e,t,"'ll","will"):e.push(t)};#ze=(e,t,s,i)=>{const n=this.#Oe(t,s);e.push(n,"",i)};#Oe=(e,t)=>{const s=this.#Qe(e,t);return this.#Ge(s)};#Qe=(e,t)=>e.substr(0,e.length-t.length);#Ge=e=>this.#Se(e)?e:this.#Se(e+"e")?e+"e":e;#Se=e=>this.#p.get(e);#He=(e,t,s)=>{const i=t.split(s);if(2===i.length){const t=i[0],n=i[1];return e.push(t,s,n),!0}return!1};#Ae=(e,t)=>{const s=[];t.forEach((e=>s.push(new G(e)))),this.#We.queueUp({ref:e,words:s})}}class ${#qe;#$e;constructor(){this.#qe=new O,this.#$e=new q}textBlocksParsing=e=>this.#$e.parse(e);parsePage=()=>{this.#qe.parse()};putInQueue=e=>{this.#qe.putInQueue(e)}}class j{#je;#De;constructor(){this.#je=!1,this.#De=new Set}queueUp=e=>{this.#De.add(e)};takeTurns=e=>{this.#je=!0,this.#De.forEach((t=>e(t))),this.#De.clear(),this.#je=!1};isEmpty=()=>0===this.#De.size;isActive=()=>this.#je}class D{#Ue;#_e;#u;constructor(){i.add("render-queue",new j),i.add("page-elements-queue",new j),i.add("text-elements-queue",new j),this.#u=new e,this.#_e=new $,this.#Ue=new N}runInfinityParsing=()=>{this.#Fe(),this.#Ve()};#Fe=()=>{let e=window.document.querySelector("body");this.#_e.putInQueue(e),setInterval((()=>{this.#Ye()&&this.#Xe()&&this.#_e.parsePage()}),100)};#Ve=()=>{setInterval((()=>{this.#Ye()&&this.#Je()&&this.#_e.textBlocksParsing()}),100)};runInfinityRender=()=>{setInterval((()=>{this.#Ke()&&this.#Ue.rebuildPage()}),100)};#Ke=()=>{const e=i.get("render-queue");return!e.isActive()&&!e.isEmpty()};#Ye=()=>!i.get("render-queue").isActive();#Xe=()=>{const e=i.get("page-elements-queue");return!e.isActive()&&!e.isEmpty()};#Je=()=>{const e=i.get("text-elements-queue");return!e.isActive()&&!e.isEmpty()}}class U{static draw;#Ze;#et;constructor(e,t){this.#et=e,this.#Ze=t}draw=()=>{U.draw&&window.document.body.removeChild(U.draw),U.draw=window.document.createElement("div"),U.draw.style.left=`${this.#et.getPosition().x}px`,U.draw.style.top=`${this.#et.getPosition().y}px`,U.draw.style.width=`${this.#et.getSize().width}px`,U.draw.style.height=`${this.#et.getSize().height}px`,U.draw.style.position="absolute",U.draw.style.zIndex="1000",U.draw.style.opacity="0.25",U.draw.style.pointerEvents="none",U.draw.style.border="1px solid black",window.document.body.appendChild(U.draw),this.#tt()};#tt(){this.#Ze.getBlocks().forEach(((e,t)=>{const s=e.getSize(),i=this.#Ze.getPosition(t),n=window.document.createElement("div");n.innerText=t,n.style.left=`${i.x}px`,n.style.top=`${i.y}px`,n.style.width=`${s.width}px`,n.style.height=`${s.height}px`,n.style.position="absolute",n.style.background="blue",n.style.border="1px solid black",n.style.zIndex="1000",n.style.opacity=e.isEmpty()?"0":"0.25",U.draw.appendChild(n)}))}}class _{#st;#it;constructor(e,t){this.#st=e,this.#it=t}get width(){return this.#st}get height(){return this.#it}set width(e){this.#st=e}set height(e){this.#it=e}}class F{#nt;#rt;#ot;#at="left:0;top:0;position:absolute;z-index:100";constructor(e,t){this.#ot=t,this.#rt=e}getSize=e=>{const t=this.#ht();return this.#nt=document.createElement("div"),this.#ct(t),this.#lt(),this.#dt(e,t)};#dt=(e,t)=>{parent.document.body.appendChild(this.#nt);const s=this.#ut(e);this.#pt(e,t,s);const i=this.#gt(),n=this.#ft();this.#pt(e,t,n);const r=this.#gt();return parent.document.body.removeChild(this.#nt),{block:i,inline:r}};#gt=()=>new _(this.#nt.offsetWidth,this.#nt.offsetHeight);#pt=(e,t,s)=>{const i=t.fontSize,n=t.fontFamily,r=this.#wt(i,n),o=this.#xt(r,s);this.#vt(o)};#wt=(e,t)=>`${this.#at};\n                font-size:${e};\n                font-family:${t};`;#vt=e=>document.all?this.#nt.style.setAttribute("cssText",e):this.#nt.setAttribute("style",e);#ut=e=>`width:${e.width}px;height:auto`;#ft=()=>"height:auto;width:auto";#ct=e=>{this.#nt.style=e};#ht=()=>window.getComputedStyle(this.#rt);#lt(){this.#nt.innerHTML=this.#rt.innerHTML,this.#nt.innerText=this.#ot}#xt=(e,t)=>`${e}${t}`}class V{}class Y{}class X{constructor(e,t,s){this.cursor=e,this.block=t,this.textLength=s}}class J{constructor(e,t){this.getWord=()=>{const e=this.getCurrentTextBlockSize(),t=this.getCursorPercentageX(e),s=1/this.currentTextBlock.length,i=Math.floor(t/s),n=[""];return this.next(n,this.currentTextBlock,i,((e,t,s)=>(e[0]=e[0]+t,s+1))),this.next(n,this.currentTextBlock,i-1,((e,t,s)=>(e[0]=t+e[0],s-1))),n[0]},this.getNetGraph=()=>this.netGraph,this.getText=()=>this.text,this.getTextBlocks=()=>{const e=this.getText().split("\n"),t=e.pop();return t&&e.push(t),e},this.getCurrentTextBlockSize=()=>{const e=this.clone.getSize(this.block).inline;return this.netGraph.currentTextBlockSize=Object.assign({},e),e},this.getCursorPercentageX=e=>this.cursor.x/e.width,this.getTextBlockIndex=()=>{if(!this.cursor)return;let e=0,t=0;for(;this.cursor.y>e;)e+=this.textBlockSizes[t].height*this.coefficient,t++;return t-1},this.setupText=e=>{if(!e.target)throw new DOMException;this.text=e.target.innerText},this.setupCursor=e=>{this.cursor=new Y,this.cursor.x=e.offsetX,this.cursor.y=e.offsetY},this.setupBlock=e=>{this.block=new V;const t=e.target;this.block.width=t.offsetWidth,this.block.height=t.offsetHeight,this.block.x=t.offsetLeft,this.block.y=t.offsetTop;let s=t.offsetParent;for(;s&&s.offsetParent;)s=s.offsetParent,this.block.x+=s.offsetLeft,this.block.y+=s.offsetTop},this.next=(e,t,s,i)=>{let n=t[s];if(this.notUnsupportedSymbol(n)){const r=i(e,n,s);this.next(e,t,r,i)}},this.notUnsupportedSymbol=e=>e&&" "!==e&&"."!==e&&","!==e&&"“"!==e&&"”"!==e&&"!"!==e&&"?"!==e,this.event=e,this.innerTextBlocks=t;try{this.setupText(e),this.setupCursor(e),this.setupBlock(e),this.netGraph=new X(this.cursor,this.block,this.text.length),this.textBlockSizes=this.getTextBlocks().map((t=>{const s=new F(e.target,t).getSize(this.block);return s.height||(s.height=20),s})),this.realHeight=this.textBlockSizes.reduce(((e,t)=>e+t.height),0),this.coefficient=this.block.height/this.realHeight,this.netGraph.coefficient=this.coefficient,this.netGraph.realHeight=this.realHeight;const t=this.getTextBlockIndex();this.netGraph.currentLine=t,this.netGraph.textBlocksCount=this.getTextBlocks().length,this.currentTextBlock=this.getTextBlocks()[t],this.clone=new F(e.target,this.currentTextBlock)}catch(e){}}}class K{#mt;#ot;#bt;constructor(e,t){this.#ot=t,this.#mt=!(t.trim().length>0),this.#yt(e)}getSize=()=>this.#bt.block;getInlineSize=()=>this.#bt.inline;getLinesCount=()=>this.#bt.block.height/this.#bt.inline.height;getLineHeight=()=>this.#bt.inline.height;setLineHeight=e=>{this.#bt.inline.height=e};isEmpty=()=>this.#mt;#yt=e=>{const t=e.getRef(),s=new F(t,this.#kt());this.#bt=s.getSize(e.getSize())};#kt=()=>this.isEmpty()?"0":this.#ot}class Z{#rt;#Et;#Tt;#St;#Ct;constructor(e){this.#rt=e.getRef(),this.#Pt(),this.#Mt(e),this.#Rt(e)}getBlocks=()=>this.#St;getPositions=()=>this.#Tt;getPosition=e=>this.#Tt[e];#Mt=e=>{this.#Ct=0,this.#St=this.#Et.map((t=>{const s=new K(e,t);return this.#Ct+=this.#Lt(s),s}))};#Wt=()=>{this.#Ct=0,this.#Tt=[],this.#St.forEach((e=>{this.#Tt.push({x:0,y:this.#Ct}),this.#Ct+=this.#Lt(e)}))};#Lt=e=>e.isEmpty()?e.getLineHeight():e.getSize().height;#Rt=e=>{const t=e.getSize().height/this.#Ct;this.#St.forEach((e=>{e.getSize().height*=t,e.isEmpty()?e.setLineHeight(e.getSize().height):e.setLineHeight(e.getLineHeight()*t)})),this.#Wt()};#Pt(){this.#Et=this.#rt.innerText.split("\n");const e=this.#Et.pop();e&&this.#Et.push(e)}}class ee{constructor(e,t){this._focusBlock=e,this._textBlocks=t}get focusBlock(){return this._focusBlock}get textBlocks(){return this._textBlocks}}class te{#rt;#bt;#Bt;#At;constructor(e){this.#rt=e.target,this.#At=this.#rt.getBoundingClientRect(),this.#yt(),this.#It()}getRef=()=>this.#rt;getSize=()=>this.#bt;getPosition=()=>this.#Bt;#It=()=>{const e=this.#At.x+window.scrollX,t=this.#At.y+window.scrollY;this.#Bt={x:e,y:t}};#yt=()=>{const e=this.#At.width,t=this.#At.height;this.#bt={width:e,height:t}}}var se,ie,ne,re,oe,ae=function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,s):n?n.value=s:t.set(e,s),s},he=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)};class ce{constructor(){se.set(this,void 0),ie.set(this,void 0),this.getOrUpdateCache=e=>{let t=this.getCache(e);return t||(he(this,oe,"f").call(this,e).length>0?t=he(this,ne,"f").call(this,e):he(this,se,"f").add(e.target)),t},this.getCache=e=>he(this,ie,"f").get(e.target),this.validateNoneBlackListElement=(e,t)=>{he(this,se,"f").has(e.target)||t()},ne.set(this,(e=>{const t=he(this,re,"f").call(this,e),s=new Z(t),i=new ee(t,s);return he(this,ie,"f").set(e.target,i),i})),re.set(this,(e=>new te(e))),oe.set(this,(e=>Array.from(e.target.childNodes).filter((e=>"#text"===e.nodeName)))),ae(this,se,new Set,"f"),ae(this,ie,new Map,"f")}}se=new WeakMap,ie=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap;var le,de=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)};class ue{constructor(e){le.set(this,void 0),this.updatePopup=(e,t)=>{const s=de(this,le,"f").getRef();de(this,le,"f").displayOn(),de(this,le,"f").setContent(e,t),de(this,le,"f").setPosition(window.innerWidth-s.offsetWidth,window.innerHeight-s.offsetHeight-20)},function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?n.call(e,s):n?n.value=s:t.set(e,s)}(this,le,i.get(e),"f")}}le=new WeakMap;var pe;class ge{constructor(){pe.set(this,void 0),this.run=()=>{addEventListener("click",this.onclick),addEventListener("mousemove",this.onmousemove),addEventListener("scroll",this.onmousemove)},this.onclick=e=>{let t=this.cacheManager.getCache(e);if(t){const s=new J(e,t.textBlocks),i=s.getWord(),n=s.getNetGraph();(function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)})(this,pe,"f").updatePopup(i,n)}},this.onmousemove=e=>{this.cacheManager.validateNoneBlackListElement(e,(()=>{let t=this.cacheManager.getOrUpdateCache(e);new U(t.focusBlock,t.textBlocks).draw(),this.onclick(e)}))},this.cacheManager=new ce,function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?n.call(e,s):n?n.value=s:t.set(e,s)}(this,pe,new ue("menu"),"f")}}pe=new WeakMap;var fe,we,xe,ve,me,be=function(e,t,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,s):n?n.value=s:t.set(e,s),s},ye=function(e,t,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(e):i?i.value:t.get(e)};fe=new WeakMap,we=new WeakMap,xe=new WeakMap,ve=new WeakMap,me=new WeakMap;const ke=new class{constructor(){fe.set(this,void 0),we.set(this,void 0),xe.set(this,void 0),this.run=()=>{ye(this,we,"f").appParams().then((e=>{ye(this,ve,"f").call(this,e)}))},ve.set(this,(e=>{e&&(ye(this,fe,"f").append(),ye(this,xe,"f").run())})),me.set(this,(()=>{i.add("language",{sl:"en",tl:"ru"});const e=new D;e.runInfinityParsing(),e.runInfinityRender()})),be(this,we,new n,"f"),be(this,fe,new c,"f"),i.add("menu",new I),be(this,xe,new ge,"f")}};new class{#Ht;#y;#Nt;constructor(e){this.#Ht=new i,this.#Nt=e,this.#y=new a}start=()=>{this.#y.executeAfter(this.#zt),this.#y.loadWordbooks()};#zt=()=>{i.add("wordbook",this.#y),this.#Nt.run()}}(ke).start()})()})();